#compdef claude

# Completion script for claude CLI

_claude() {
  local -a commands
  commands=(
    'help:Show help information'
    'version:Show version information'
    'chat:Start a chat session'
    'prompt:Send a single prompt and get a response'
    'config:Configure claude settings'
  )

  _arguments -C \
    '1: :->command' \
    '*:: :->args'

  case $state in
    (command)
      _describe -t commands 'claude commands' commands
      ;;
    (args)
      case $words[1] in
        (chat)
          _arguments \
            '--model=[Specify model to use]:model:(claude-3-opus claude-3-sonnet claude-3-haiku)' \
            '--temperature=[Set temperature (0.0-1.0)]:temperature:' \
            '--file=[Include a file with the prompt]:file:_files'
          ;;
        (prompt)
          _arguments \
            '--model=[Specify model to use]:model:(claude-3-opus claude-3-sonnet claude-3-haiku)' \
            '--temperature=[Set temperature (0.0-1.0)]:temperature:' \
            '--file=[Include a file with the prompt]:file:_files' \
            '--output=[Output format]:format:(text json markdown)'
          ;;
        (config)
          local -a config_cmds
          config_cmds=(
            'set:Set a configuration value'
            'get:Get a configuration value'
            'list:List all configuration values'
          )
          _arguments \
            '1: :->config_cmd' \
            '*:: :->config_args'
          
          case $state in
            (config_cmd)
              _describe -t config_cmds 'config commands' config_cmds
              ;;
            (config_args)
              case $words[1] in
                (set)
                  _arguments \
                    '1:key:(api_key default_model temperature)' \
                    '2:value:'
                  ;;
                (get)
                  _arguments \
                    '1:key:(api_key default_model temperature)'
                  ;;
              esac
              ;;
          esac
          ;;
      esac
      ;;
  esac
}

_claude
